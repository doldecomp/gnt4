.include "macros.inc"

.section .text  # 0x8017D880 - 0x8017E1F8

.global IsCard
IsCard:
/* 8017D880 0017A880  54 60 00 1F */	rlwinm. r0, r3, 0, 0, 0xf
/* 8017D884 0017A884  41 82 00 24 */	beq lbl_8017D8A8
/* 8017D888 0017A888  3C 03 80 00 */	addis r0, r3, 0x8000
/* 8017D88C 0017A88C  28 00 00 04 */	cmplwi r0, 4
/* 8017D890 0017A890  40 82 00 10 */	bne lbl_8017D8A0
/* 8017D894 0017A894  A0 0D 81 F0 */	lhz r0, lbl_80276B10@sda21(r13)
/* 8017D898 0017A898  28 00 FF FF */	cmplwi r0, 0xffff
/* 8017D89C 0017A89C  40 82 00 0C */	bne lbl_8017D8A8
lbl_8017D8A0:
/* 8017D8A0 0017A8A0  38 60 00 00 */	li r3, 0
/* 8017D8A4 0017A8A4  4E 80 00 20 */	blr 
lbl_8017D8A8:
/* 8017D8A8 0017A8A8  54 60 07 BF */	clrlwi. r0, r3, 0x1e
/* 8017D8AC 0017A8AC  41 82 00 0C */	beq lbl_8017D8B8
/* 8017D8B0 0017A8B0  38 60 00 00 */	li r3, 0
/* 8017D8B4 0017A8B4  4E 80 00 20 */	blr 
lbl_8017D8B8:
/* 8017D8B8 0017A8B8  54 65 06 3A */	rlwinm r5, r3, 0, 0x18, 0x1d
/* 8017D8BC 0017A8BC  2C 05 00 20 */	cmpwi r5, 0x20
/* 8017D8C0 0017A8C0  41 82 00 48 */	beq lbl_8017D908
/* 8017D8C4 0017A8C4  40 80 00 28 */	bge lbl_8017D8EC
/* 8017D8C8 0017A8C8  2C 05 00 08 */	cmpwi r5, 8
/* 8017D8CC 0017A8CC  41 82 00 3C */	beq lbl_8017D908
/* 8017D8D0 0017A8D0  40 80 00 10 */	bge lbl_8017D8E0
/* 8017D8D4 0017A8D4  2C 05 00 04 */	cmpwi r5, 4
/* 8017D8D8 0017A8D8  41 82 00 30 */	beq lbl_8017D908
/* 8017D8DC 0017A8DC  48 00 00 24 */	b lbl_8017D900
lbl_8017D8E0:
/* 8017D8E0 0017A8E0  2C 05 00 10 */	cmpwi r5, 0x10
/* 8017D8E4 0017A8E4  41 82 00 24 */	beq lbl_8017D908
/* 8017D8E8 0017A8E8  48 00 00 18 */	b lbl_8017D900
lbl_8017D8EC:
/* 8017D8EC 0017A8EC  2C 05 00 80 */	cmpwi r5, 0x80
/* 8017D8F0 0017A8F0  41 82 00 18 */	beq lbl_8017D908
/* 8017D8F4 0017A8F4  40 80 00 0C */	bge lbl_8017D900
/* 8017D8F8 0017A8F8  2C 05 00 40 */	cmpwi r5, 0x40
/* 8017D8FC 0017A8FC  41 82 00 0C */	beq lbl_8017D908
lbl_8017D900:
/* 8017D900 0017A900  38 60 00 00 */	li r3, 0
/* 8017D904 0017A904  4E 80 00 20 */	blr 
lbl_8017D908:
/* 8017D908 0017A908  3C 80 80 21 */	lis r4, lbl_80217040@ha
/* 8017D90C 0017A90C  54 63 BE FA */	rlwinm r3, r3, 0x17, 0x1b, 0x1d
/* 8017D910 0017A910  38 04 70 40 */	addi r0, r4, lbl_80217040@l
/* 8017D914 0017A914  7C 60 1A 14 */	add r3, r0, r3
/* 8017D918 0017A918  80 63 00 00 */	lwz r3, 0(r3)
/* 8017D91C 0017A91C  2C 03 00 00 */	cmpwi r3, 0
/* 8017D920 0017A920  40 82 00 0C */	bne lbl_8017D92C
/* 8017D924 0017A924  38 60 00 00 */	li r3, 0
/* 8017D928 0017A928  4E 80 00 20 */	blr 
lbl_8017D92C:
/* 8017D92C 0017A92C  54 A0 88 DC */	rlwinm r0, r5, 0x11, 3, 0xe
/* 8017D930 0017A930  7C 00 1B 96 */	divwu r0, r0, r3
/* 8017D934 0017A934  28 00 00 08 */	cmplwi r0, 8
/* 8017D938 0017A938  40 80 00 0C */	bge lbl_8017D944
/* 8017D93C 0017A93C  38 60 00 00 */	li r3, 0
/* 8017D940 0017A940  4E 80 00 20 */	blr 
lbl_8017D944:
/* 8017D944 0017A944  38 60 00 01 */	li r3, 1
/* 8017D948 0017A948  4E 80 00 20 */	blr 

.global CARDProbe
CARDProbe:
/* 8017D94C 0017A94C  7C 08 02 A6 */	mflr r0
/* 8017D950 0017A950  3C 80 80 00 */	lis r4, 0x800030E3@ha
/* 8017D954 0017A954  90 01 00 04 */	stw r0, 4(r1)
/* 8017D958 0017A958  94 21 FF F8 */	stwu r1, -8(r1)
/* 8017D95C 0017A95C  88 04 30 E3 */	lbz r0, 0x800030E3@l(r4)
/* 8017D960 0017A960  54 00 06 31 */	rlwinm. r0, r0, 0, 0x18, 0x18
/* 8017D964 0017A964  41 82 00 0C */	beq lbl_8017D970
/* 8017D968 0017A968  38 60 00 00 */	li r3, 0
/* 8017D96C 0017A96C  48 00 00 08 */	b lbl_8017D974
lbl_8017D970:
/* 8017D970 0017A970  48 01 A2 CD */	bl EXIProbe
lbl_8017D974:
/* 8017D974 0017A974  80 01 00 0C */	lwz r0, 0xc(r1)
/* 8017D978 0017A978  38 21 00 08 */	addi r1, r1, 8
/* 8017D97C 0017A97C  7C 08 03 A6 */	mtlr r0
/* 8017D980 0017A980  4E 80 00 20 */	blr 

.global DoMount
DoMount:
/* 8017D984 0017A984  7C 08 02 A6 */	mflr r0
/* 8017D988 0017A988  90 01 00 04 */	stw r0, 4(r1)
/* 8017D98C 0017A98C  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 8017D990 0017A990  93 E1 00 2C */	stw r31, 0x2c(r1)
/* 8017D994 0017A994  93 C1 00 28 */	stw r30, 0x28(r1)
/* 8017D998 0017A998  93 A1 00 24 */	stw r29, 0x24(r1)
/* 8017D99C 0017A99C  3B A3 00 00 */	addi r29, r3, 0
/* 8017D9A0 0017A9A0  1C 9D 01 10 */	mulli r4, r29, 0x110
/* 8017D9A4 0017A9A4  93 81 00 20 */	stw r28, 0x20(r1)
/* 8017D9A8 0017A9A8  3C 60 80 24 */	lis r3, lbl_80245540@ha
/* 8017D9AC 0017A9AC  38 03 55 40 */	addi r0, r3, lbl_80245540@l
/* 8017D9B0 0017A9B0  7C 60 22 14 */	add r3, r0, r4
/* 8017D9B4 0017A9B4  80 03 00 24 */	lwz r0, 0x24(r3)
/* 8017D9B8 0017A9B8  3B E3 00 00 */	addi r31, r3, 0
/* 8017D9BC 0017A9BC  2C 00 00 00 */	cmpwi r0, 0
/* 8017D9C0 0017A9C0  40 82 02 F0 */	bne lbl_8017DCB0
/* 8017D9C4 0017A9C4  38 7D 00 00 */	addi r3, r29, 0
/* 8017D9C8 0017A9C8  38 A1 00 18 */	addi r5, r1, 0x18
/* 8017D9CC 0017A9CC  38 80 00 00 */	li r4, 0
/* 8017D9D0 0017A9D0  48 01 AE 85 */	bl EXIGetID
/* 8017D9D4 0017A9D4  2C 03 00 00 */	cmpwi r3, 0
/* 8017D9D8 0017A9D8  40 82 00 0C */	bne lbl_8017D9E4
/* 8017D9DC 0017A9DC  3B C0 FF FD */	li r30, -3
/* 8017D9E0 0017A9E0  48 00 00 20 */	b lbl_8017DA00
lbl_8017D9E4:
/* 8017D9E4 0017A9E4  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8017D9E8 0017A9E8  4B FF FE 99 */	bl IsCard
/* 8017D9EC 0017A9EC  2C 03 00 00 */	cmpwi r3, 0
/* 8017D9F0 0017A9F0  41 82 00 0C */	beq lbl_8017D9FC
/* 8017D9F4 0017A9F4  3B C0 00 00 */	li r30, 0
/* 8017D9F8 0017A9F8  48 00 00 08 */	b lbl_8017DA00
lbl_8017D9FC:
/* 8017D9FC 0017A9FC  3B C0 FF FE */	li r30, -2
lbl_8017DA00:
/* 8017DA00 0017AA00  2C 1E 00 00 */	cmpwi r30, 0
/* 8017DA04 0017AA04  41 80 03 88 */	blt lbl_8017DD8C
/* 8017DA08 0017AA08  80 01 00 18 */	lwz r0, 0x18(r1)
/* 8017DA0C 0017AA0C  3C 80 80 21 */	lis r4, lbl_80217040@ha
/* 8017DA10 0017AA10  38 A4 70 40 */	addi r5, r4, lbl_80217040@l
/* 8017DA14 0017AA14  90 1F 01 08 */	stw r0, 0x108(r31)
/* 8017DA18 0017AA18  3C 60 80 21 */	lis r3, lbl_80217060@ha
/* 8017DA1C 0017AA1C  38 03 70 60 */	addi r0, r3, lbl_80217060@l
/* 8017DA20 0017AA20  80 C1 00 18 */	lwz r6, 0x18(r1)
/* 8017DA24 0017AA24  38 7D 00 00 */	addi r3, r29, 0
/* 8017DA28 0017AA28  38 9F 00 12 */	addi r4, r31, 0x12
/* 8017DA2C 0017AA2C  54 C6 06 3A */	rlwinm r6, r6, 0, 0x18, 0x1d
/* 8017DA30 0017AA30  B0 DF 00 08 */	sth r6, 8(r31)
/* 8017DA34 0017AA34  80 C1 00 18 */	lwz r6, 0x18(r1)
/* 8017DA38 0017AA38  54 C6 BE FA */	rlwinm r6, r6, 0x17, 0x1b, 0x1d
/* 8017DA3C 0017AA3C  7C A5 32 14 */	add r5, r5, r6
/* 8017DA40 0017AA40  80 A5 00 00 */	lwz r5, 0(r5)
/* 8017DA44 0017AA44  90 BF 00 0C */	stw r5, 0xc(r31)
/* 8017DA48 0017AA48  A0 DF 00 08 */	lhz r6, 8(r31)
/* 8017DA4C 0017AA4C  80 BF 00 0C */	lwz r5, 0xc(r31)
/* 8017DA50 0017AA50  54 C6 A0 16 */	slwi r6, r6, 0x14
/* 8017DA54 0017AA54  7C C6 1E 70 */	srawi r6, r6, 3
/* 8017DA58 0017AA58  7C C6 01 94 */	addze r6, r6
/* 8017DA5C 0017AA5C  7C A6 2B D6 */	divw r5, r6, r5
/* 8017DA60 0017AA60  B0 BF 00 10 */	sth r5, 0x10(r31)
/* 8017DA64 0017AA64  80 A1 00 18 */	lwz r5, 0x18(r1)
/* 8017DA68 0017AA68  54 A5 D6 FA */	rlwinm r5, r5, 0x1a, 0x1b, 0x1d
/* 8017DA6C 0017AA6C  7C A0 2A 14 */	add r5, r0, r5
/* 8017DA70 0017AA70  80 05 00 00 */	lwz r0, 0(r5)
/* 8017DA74 0017AA74  90 1F 00 14 */	stw r0, 0x14(r31)
/* 8017DA78 0017AA78  4B FF C2 45 */	bl __CARDReadVendorID
/* 8017DA7C 0017AA7C  7C 7E 1B 79 */	or. r30, r3, r3
/* 8017DA80 0017AA80  41 80 03 0C */	blt lbl_8017DD8C
/* 8017DA84 0017AA84  4B FF D3 35 */	bl CARDGetFastMode
/* 8017DA88 0017AA88  2C 03 00 00 */	cmpwi r3, 0
/* 8017DA8C 0017AA8C  41 82 00 20 */	beq lbl_8017DAAC
/* 8017DA90 0017AA90  A0 1F 00 12 */	lhz r0, 0x12(r31)
/* 8017DA94 0017AA94  7C 00 46 70 */	srawi r0, r0, 8
/* 8017DA98 0017AA98  2C 00 00 EC */	cmpwi r0, 0xec
/* 8017DA9C 0017AA9C  40 82 00 10 */	bne lbl_8017DAAC
/* 8017DAA0 0017AAA0  38 00 02 00 */	li r0, 0x200
/* 8017DAA4 0017AAA4  B0 1F 00 0A */	sth r0, 0xa(r31)
/* 8017DAA8 0017AAA8  48 00 00 0C */	b lbl_8017DAB4
lbl_8017DAAC:
/* 8017DAAC 0017AAAC  38 00 00 80 */	li r0, 0x80
/* 8017DAB0 0017AAB0  B0 1F 00 0A */	sth r0, 0xa(r31)
lbl_8017DAB4:
/* 8017DAB4 0017AAB4  7F A3 EB 78 */	mr r3, r29
/* 8017DAB8 0017AAB8  4B FF C2 F5 */	bl __CARDClearStatus
/* 8017DABC 0017AABC  7C 7E 1B 79 */	or. r30, r3, r3
/* 8017DAC0 0017AAC0  41 80 02 CC */	blt lbl_8017DD8C
/* 8017DAC4 0017AAC4  38 7D 00 00 */	addi r3, r29, 0
/* 8017DAC8 0017AAC8  38 81 00 14 */	addi r4, r1, 0x14
/* 8017DACC 0017AACC  4B FF C1 01 */	bl __CARDReadStatus
/* 8017DAD0 0017AAD0  7C 7E 1B 79 */	or. r30, r3, r3
/* 8017DAD4 0017AAD4  41 80 02 B8 */	blt lbl_8017DD8C
/* 8017DAD8 0017AAD8  7F A3 EB 78 */	mr r3, r29
/* 8017DADC 0017AADC  48 01 A1 61 */	bl EXIProbe
/* 8017DAE0 0017AAE0  2C 03 00 00 */	cmpwi r3, 0
/* 8017DAE4 0017AAE4  40 82 00 0C */	bne lbl_8017DAF0
/* 8017DAE8 0017AAE8  3B C0 FF FD */	li r30, -3
/* 8017DAEC 0017AAEC  48 00 02 A0 */	b lbl_8017DD8C
lbl_8017DAF0:
/* 8017DAF0 0017AAF0  88 01 00 14 */	lbz r0, 0x14(r1)
/* 8017DAF4 0017AAF4  54 00 06 73 */	rlwinm. r0, r0, 0, 0x19, 0x19
/* 8017DAF8 0017AAF8  40 82 01 14 */	bne lbl_8017DC0C
/* 8017DAFC 0017AAFC  38 7D 00 00 */	addi r3, r29, 0
/* 8017DB00 0017AB00  38 9F 00 18 */	addi r4, r31, 0x18
/* 8017DB04 0017AB04  4B FF D6 45 */	bl __CARDUnlock
/* 8017DB08 0017AB08  7C 7E 1B 79 */	or. r30, r3, r3
/* 8017DB0C 0017AB0C  41 80 02 80 */	blt lbl_8017DD8C
/* 8017DB10 0017AB10  4B FE D7 E5 */	bl __OSLockSramEx
/* 8017DB14 0017AB14  1C 1D 00 0C */	mulli r0, r29, 0xc
/* 8017DB18 0017AB18  7C 83 02 14 */	add r4, r3, r0
/* 8017DB1C 0017AB1C  88 1F 00 18 */	lbz r0, 0x18(r31)
/* 8017DB20 0017AB20  38 BF 00 18 */	addi r5, r31, 0x18
/* 8017DB24 0017AB24  98 04 00 00 */	stb r0, 0(r4)
/* 8017DB28 0017AB28  39 05 00 02 */	addi r8, r5, 2
/* 8017DB2C 0017AB2C  39 25 00 03 */	addi r9, r5, 3
/* 8017DB30 0017AB30  88 FF 00 18 */	lbz r7, 0x18(r31)
/* 8017DB34 0017AB34  39 45 00 04 */	addi r10, r5, 4
/* 8017DB38 0017AB38  88 1F 00 19 */	lbz r0, 0x19(r31)
/* 8017DB3C 0017AB3C  39 65 00 05 */	addi r11, r5, 5
/* 8017DB40 0017AB40  39 85 00 06 */	addi r12, r5, 6
/* 8017DB44 0017AB44  98 04 00 01 */	stb r0, 1(r4)
/* 8017DB48 0017AB48  3B 85 00 07 */	addi r28, r5, 7
/* 8017DB4C 0017AB4C  38 A0 00 08 */	li r5, 8
/* 8017DB50 0017AB50  88 1F 00 19 */	lbz r0, 0x19(r31)
/* 8017DB54 0017AB54  88 C8 00 00 */	lbz r6, 0(r8)
/* 8017DB58 0017AB58  7C 07 02 14 */	add r0, r7, r0
/* 8017DB5C 0017AB5C  98 C4 00 02 */	stb r6, 2(r4)
/* 8017DB60 0017AB60  88 E8 00 00 */	lbz r7, 0(r8)
/* 8017DB64 0017AB64  88 C9 00 00 */	lbz r6, 0(r9)
/* 8017DB68 0017AB68  7C 00 3A 14 */	add r0, r0, r7
/* 8017DB6C 0017AB6C  98 C4 00 03 */	stb r6, 3(r4)
/* 8017DB70 0017AB70  88 E9 00 00 */	lbz r7, 0(r9)
/* 8017DB74 0017AB74  88 CA 00 00 */	lbz r6, 0(r10)
/* 8017DB78 0017AB78  7C 00 3A 14 */	add r0, r0, r7
/* 8017DB7C 0017AB7C  98 C4 00 04 */	stb r6, 4(r4)
/* 8017DB80 0017AB80  88 EA 00 00 */	lbz r7, 0(r10)
/* 8017DB84 0017AB84  88 CB 00 00 */	lbz r6, 0(r11)
/* 8017DB88 0017AB88  7C 00 3A 14 */	add r0, r0, r7
/* 8017DB8C 0017AB8C  98 C4 00 05 */	stb r6, 5(r4)
/* 8017DB90 0017AB90  88 EB 00 00 */	lbz r7, 0(r11)
/* 8017DB94 0017AB94  88 CC 00 00 */	lbz r6, 0(r12)
/* 8017DB98 0017AB98  7C 00 3A 14 */	add r0, r0, r7
/* 8017DB9C 0017AB9C  98 C4 00 06 */	stb r6, 6(r4)
/* 8017DBA0 0017ABA0  88 EC 00 00 */	lbz r7, 0(r12)
/* 8017DBA4 0017ABA4  88 DC 00 00 */	lbz r6, 0(r28)
/* 8017DBA8 0017ABA8  7C 00 3A 14 */	add r0, r0, r7
/* 8017DBAC 0017ABAC  98 C4 00 07 */	stb r6, 7(r4)
/* 8017DBB0 0017ABB0  88 DC 00 00 */	lbz r6, 0(r28)
/* 8017DBB4 0017ABB4  7C 00 32 14 */	add r0, r0, r6
/* 8017DBB8 0017ABB8  48 00 01 F0 */	b lbl_8017DDA8
lbl_8017DBBC:
/* 8017DBBC 0017ABBC  20 85 00 0C */	subfic r4, r5, 0xc
/* 8017DBC0 0017ABC0  2C 05 00 0C */	cmpwi r5, 0xc
/* 8017DBC4 0017ABC4  7C 89 03 A6 */	mtctr r4
/* 8017DBC8 0017ABC8  40 80 00 28 */	bge lbl_8017DBF0
lbl_8017DBCC:
/* 8017DBCC 0017ABCC  38 E5 00 18 */	addi r7, r5, 0x18
/* 8017DBD0 0017ABD0  7C FF 3A 14 */	add r7, r31, r7
/* 8017DBD4 0017ABD4  88 87 00 00 */	lbz r4, 0(r7)
/* 8017DBD8 0017ABD8  38 A5 00 01 */	addi r5, r5, 1
/* 8017DBDC 0017ABDC  98 86 00 00 */	stb r4, 0(r6)
/* 8017DBE0 0017ABE0  38 C6 00 01 */	addi r6, r6, 1
/* 8017DBE4 0017ABE4  88 87 00 00 */	lbz r4, 0(r7)
/* 8017DBE8 0017ABE8  7C 00 22 14 */	add r0, r0, r4
/* 8017DBEC 0017ABEC  42 00 FF E0 */	bdnz lbl_8017DBCC
lbl_8017DBF0:
/* 8017DBF0 0017ABF0  7C 63 EA 14 */	add r3, r3, r29
/* 8017DBF4 0017ABF4  7C 00 00 F8 */	nor r0, r0, r0
/* 8017DBF8 0017ABF8  98 03 00 26 */	stb r0, 0x26(r3)
/* 8017DBFC 0017ABFC  38 60 00 01 */	li r3, 1
/* 8017DC00 0017AC00  4B FE DA B1 */	bl __OSUnlockSramEx
/* 8017DC04 0017AC04  7F C3 F3 78 */	mr r3, r30
/* 8017DC08 0017AC08  48 00 01 B0 */	b lbl_8017DDB8
lbl_8017DC0C:
/* 8017DC0C 0017AC0C  38 00 00 01 */	li r0, 1
/* 8017DC10 0017AC10  90 1F 00 24 */	stw r0, 0x24(r31)
/* 8017DC14 0017AC14  4B FE D6 E1 */	bl __OSLockSramEx
/* 8017DC18 0017AC18  1C 1D 00 0C */	mulli r0, r29, 0xc
/* 8017DC1C 0017AC1C  3B C3 00 00 */	addi r30, r3, 0
/* 8017DC20 0017AC20  7C BE 02 14 */	add r5, r30, r0
/* 8017DC24 0017AC24  88 85 00 00 */	lbz r4, 0(r5)
/* 8017DC28 0017AC28  38 C0 00 08 */	li r6, 8
/* 8017DC2C 0017AC2C  88 05 00 01 */	lbz r0, 1(r5)
/* 8017DC30 0017AC30  88 65 00 02 */	lbz r3, 2(r5)
/* 8017DC34 0017AC34  7F 84 02 14 */	add r28, r4, r0
/* 8017DC38 0017AC38  88 05 00 03 */	lbz r0, 3(r5)
/* 8017DC3C 0017AC3C  7F 9C 1A 14 */	add r28, r28, r3
/* 8017DC40 0017AC40  88 65 00 04 */	lbz r3, 4(r5)
/* 8017DC44 0017AC44  7F 9C 02 14 */	add r28, r28, r0
/* 8017DC48 0017AC48  88 05 00 05 */	lbz r0, 5(r5)
/* 8017DC4C 0017AC4C  7F 9C 1A 14 */	add r28, r28, r3
/* 8017DC50 0017AC50  88 65 00 06 */	lbz r3, 6(r5)
/* 8017DC54 0017AC54  7F 9C 02 14 */	add r28, r28, r0
/* 8017DC58 0017AC58  88 05 00 07 */	lbz r0, 7(r5)
/* 8017DC5C 0017AC5C  7F 9C 1A 14 */	add r28, r28, r3
/* 8017DC60 0017AC60  7F 9C 02 14 */	add r28, r28, r0
/* 8017DC64 0017AC64  48 00 01 4C */	b lbl_8017DDB0
lbl_8017DC68:
/* 8017DC68 0017AC68  20 06 00 0C */	subfic r0, r6, 0xc
/* 8017DC6C 0017AC6C  2C 06 00 0C */	cmpwi r6, 0xc
/* 8017DC70 0017AC70  7C 09 03 A6 */	mtctr r0
/* 8017DC74 0017AC74  40 80 00 14 */	bge lbl_8017DC88
lbl_8017DC78:
/* 8017DC78 0017AC78  88 03 00 00 */	lbz r0, 0(r3)
/* 8017DC7C 0017AC7C  38 63 00 01 */	addi r3, r3, 1
/* 8017DC80 0017AC80  7F 9C 02 14 */	add r28, r28, r0
/* 8017DC84 0017AC84  42 00 FF F4 */	bdnz lbl_8017DC78
lbl_8017DC88:
/* 8017DC88 0017AC88  38 60 00 00 */	li r3, 0
/* 8017DC8C 0017AC8C  4B FE DA 25 */	bl __OSUnlockSramEx
/* 8017DC90 0017AC90  7C 7E EA 14 */	add r3, r30, r29
/* 8017DC94 0017AC94  7F 80 E0 F8 */	nor r0, r28, r28
/* 8017DC98 0017AC98  88 63 00 26 */	lbz r3, 0x26(r3)
/* 8017DC9C 0017AC9C  54 00 06 3E */	clrlwi r0, r0, 0x18
/* 8017DCA0 0017ACA0  7C 03 00 40 */	cmplw r3, r0
/* 8017DCA4 0017ACA4  41 82 00 0C */	beq lbl_8017DCB0
/* 8017DCA8 0017ACA8  3B C0 FF FB */	li r30, -5
/* 8017DCAC 0017ACAC  48 00 00 E0 */	b lbl_8017DD8C
lbl_8017DCB0:
/* 8017DCB0 0017ACB0  80 1F 00 24 */	lwz r0, 0x24(r31)
/* 8017DCB4 0017ACB4  2C 00 00 01 */	cmpwi r0, 1
/* 8017DCB8 0017ACB8  40 82 00 88 */	bne lbl_8017DD40
/* 8017DCBC 0017ACBC  80 7F 01 08 */	lwz r3, 0x108(r31)
/* 8017DCC0 0017ACC0  3C 03 80 00 */	addis r0, r3, 0x8000
/* 8017DCC4 0017ACC4  28 00 00 04 */	cmplwi r0, 4
/* 8017DCC8 0017ACC8  40 82 00 34 */	bne lbl_8017DCFC
/* 8017DCCC 0017ACCC  4B FE D6 29 */	bl __OSLockSramEx
/* 8017DCD0 0017ACD0  1C 1D 00 0C */	mulli r0, r29, 0xc
/* 8017DCD4 0017ACD4  7F 83 02 2E */	lhzx r28, r3, r0
/* 8017DCD8 0017ACD8  38 60 00 00 */	li r3, 0
/* 8017DCDC 0017ACDC  4B FE D9 D5 */	bl __OSUnlockSramEx
/* 8017DCE0 0017ACE0  A0 0D 81 F0 */	lhz r0, lbl_80276B10@sda21(r13)
/* 8017DCE4 0017ACE4  28 00 FF FF */	cmplwi r0, 0xffff
/* 8017DCE8 0017ACE8  41 82 00 0C */	beq lbl_8017DCF4
/* 8017DCEC 0017ACEC  7C 1C 00 40 */	cmplw r28, r0
/* 8017DCF0 0017ACF0  41 82 00 0C */	beq lbl_8017DCFC
lbl_8017DCF4:
/* 8017DCF4 0017ACF4  3B C0 FF FE */	li r30, -2
/* 8017DCF8 0017ACF8  48 00 00 94 */	b lbl_8017DD8C
lbl_8017DCFC:
/* 8017DCFC 0017ACFC  38 00 00 02 */	li r0, 2
/* 8017DD00 0017AD00  90 1F 00 24 */	stw r0, 0x24(r31)
/* 8017DD04 0017AD04  38 7D 00 00 */	addi r3, r29, 0
/* 8017DD08 0017AD08  38 80 00 01 */	li r4, 1
/* 8017DD0C 0017AD0C  4B FF BE 01 */	bl __CARDEnableInterrupt
/* 8017DD10 0017AD10  7C 7E 1B 79 */	or. r30, r3, r3
/* 8017DD14 0017AD14  41 80 00 78 */	blt lbl_8017DD8C
/* 8017DD18 0017AD18  3C 60 80 18 */	lis r3, __CARDExiHandler@ha
/* 8017DD1C 0017AD1C  38 83 98 C8 */	addi r4, r3, __CARDExiHandler@l
/* 8017DD20 0017AD20  38 7D 00 00 */	addi r3, r29, 0
/* 8017DD24 0017AD24  48 01 9D 29 */	bl EXISetExiCallback
/* 8017DD28 0017AD28  7F A3 EB 78 */	mr r3, r29
/* 8017DD2C 0017AD2C  48 01 AA 0D */	bl EXIUnlock
/* 8017DD30 0017AD30  3C 80 00 01 */	lis r4, 0x0000A000@ha
/* 8017DD34 0017AD34  80 7F 00 80 */	lwz r3, 0x80(r31)
/* 8017DD38 0017AD38  38 84 A0 00 */	addi r4, r4, 0x0000A000@l
/* 8017DD3C 0017AD3C  4B FE 8D 71 */	bl DCInvalidateRange
lbl_8017DD40:
/* 8017DD40 0017AD40  80 9F 00 24 */	lwz r4, 0x24(r31)
/* 8017DD44 0017AD44  3C 60 80 18 */	lis r3, __CARDMountCallback@ha
/* 8017DD48 0017AD48  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 8017DD4C 0017AD4C  38 E3 DD D8 */	addi r7, r3, __CARDMountCallback@l
/* 8017DD50 0017AD50  38 64 FF FE */	addi r3, r4, -2
/* 8017DD54 0017AD54  7C 80 19 D6 */	mullw r4, r0, r3
/* 8017DD58 0017AD58  80 BF 00 80 */	lwz r5, 0x80(r31)
/* 8017DD5C 0017AD5C  54 60 68 24 */	slwi r0, r3, 0xd
/* 8017DD60 0017AD60  7C C5 02 14 */	add r6, r5, r0
/* 8017DD64 0017AD64  38 7D 00 00 */	addi r3, r29, 0
/* 8017DD68 0017AD68  38 A0 20 00 */	li r5, 0x2000
/* 8017DD6C 0017AD6C  4B FF E3 A5 */	bl __CARDRead
/* 8017DD70 0017AD70  7C 7C 1B 79 */	or. r28, r3, r3
/* 8017DD74 0017AD74  40 80 00 10 */	bge lbl_8017DD84
/* 8017DD78 0017AD78  38 7F 00 00 */	addi r3, r31, 0
/* 8017DD7C 0017AD7C  38 9C 00 00 */	addi r4, r28, 0
/* 8017DD80 0017AD80  4B FF CC 75 */	bl __CARDPutControlBlock
lbl_8017DD84:
/* 8017DD84 0017AD84  7F 83 E3 78 */	mr r3, r28
/* 8017DD88 0017AD88  48 00 00 30 */	b lbl_8017DDB8
lbl_8017DD8C:
/* 8017DD8C 0017AD8C  7F A3 EB 78 */	mr r3, r29
/* 8017DD90 0017AD90  48 01 A9 A9 */	bl EXIUnlock
/* 8017DD94 0017AD94  38 7D 00 00 */	addi r3, r29, 0
/* 8017DD98 0017AD98  38 9E 00 00 */	addi r4, r30, 0
/* 8017DD9C 0017AD9C  48 00 03 15 */	bl DoUnmount
/* 8017DDA0 0017ADA0  7F C3 F3 78 */	mr r3, r30
/* 8017DDA4 0017ADA4  48 00 00 14 */	b lbl_8017DDB8
lbl_8017DDA8:
/* 8017DDA8 0017ADA8  38 C4 00 08 */	addi r6, r4, 8
/* 8017DDAC 0017ADAC  4B FF FE 10 */	b lbl_8017DBBC
lbl_8017DDB0:
/* 8017DDB0 0017ADB0  38 65 00 08 */	addi r3, r5, 8
/* 8017DDB4 0017ADB4  4B FF FE B4 */	b lbl_8017DC68
lbl_8017DDB8:
/* 8017DDB8 0017ADB8  80 01 00 34 */	lwz r0, 0x34(r1)
/* 8017DDBC 0017ADBC  83 E1 00 2C */	lwz r31, 0x2c(r1)
/* 8017DDC0 0017ADC0  83 C1 00 28 */	lwz r30, 0x28(r1)
/* 8017DDC4 0017ADC4  83 A1 00 24 */	lwz r29, 0x24(r1)
/* 8017DDC8 0017ADC8  83 81 00 20 */	lwz r28, 0x20(r1)
/* 8017DDCC 0017ADCC  38 21 00 30 */	addi r1, r1, 0x30
/* 8017DDD0 0017ADD0  7C 08 03 A6 */	mtlr r0
/* 8017DDD4 0017ADD4  4E 80 00 20 */	blr 

.global __CARDMountCallback
__CARDMountCallback:
/* 8017DDD8 0017ADD8  7C 08 02 A6 */	mflr r0
/* 8017DDDC 0017ADDC  90 01 00 04 */	stw r0, 4(r1)
/* 8017DDE0 0017ADE0  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8017DDE4 0017ADE4  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8017DDE8 0017ADE8  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8017DDEC 0017ADEC  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8017DDF0 0017ADF0  3B A4 00 00 */	addi r29, r4, 0
/* 8017DDF4 0017ADF4  2C 1D FF FD */	cmpwi r29, -3
/* 8017DDF8 0017ADF8  93 81 00 10 */	stw r28, 0x10(r1)
/* 8017DDFC 0017ADFC  3B 83 00 00 */	addi r28, r3, 0
/* 8017DE00 0017AE00  1C BC 01 10 */	mulli r5, r28, 0x110
/* 8017DE04 0017AE04  3C 60 80 24 */	lis r3, lbl_80245540@ha
/* 8017DE08 0017AE08  38 03 55 40 */	addi r0, r3, lbl_80245540@l
/* 8017DE0C 0017AE0C  7F E0 2A 14 */	add r31, r0, r5
/* 8017DE10 0017AE10  41 82 00 A8 */	beq lbl_8017DEB8
/* 8017DE14 0017AE14  40 80 00 10 */	bge lbl_8017DE24
/* 8017DE18 0017AE18  2C 1D FF FB */	cmpwi r29, -5
/* 8017DE1C 0017AE1C  41 82 00 9C */	beq lbl_8017DEB8
/* 8017DE20 0017AE20  48 00 00 A4 */	b lbl_8017DEC4
lbl_8017DE24:
/* 8017DE24 0017AE24  2C 1D 00 01 */	cmpwi r29, 1
/* 8017DE28 0017AE28  41 82 00 4C */	beq lbl_8017DE74
/* 8017DE2C 0017AE2C  40 80 00 98 */	bge lbl_8017DEC4
/* 8017DE30 0017AE30  2C 1D 00 00 */	cmpwi r29, 0
/* 8017DE34 0017AE34  40 80 00 08 */	bge lbl_8017DE3C
/* 8017DE38 0017AE38  48 00 00 8C */	b lbl_8017DEC4
lbl_8017DE3C:
/* 8017DE3C 0017AE3C  80 7F 00 24 */	lwz r3, 0x24(r31)
/* 8017DE40 0017AE40  38 03 00 01 */	addi r0, r3, 1
/* 8017DE44 0017AE44  2C 00 00 07 */	cmpwi r0, 7
/* 8017DE48 0017AE48  90 1F 00 24 */	stw r0, 0x24(r31)
/* 8017DE4C 0017AE4C  40 80 00 18 */	bge lbl_8017DE64
/* 8017DE50 0017AE50  7F 83 E3 78 */	mr r3, r28
/* 8017DE54 0017AE54  4B FF FB 31 */	bl DoMount
/* 8017DE58 0017AE58  7C 7D 1B 79 */	or. r29, r3, r3
/* 8017DE5C 0017AE5C  41 80 00 68 */	blt lbl_8017DEC4
/* 8017DE60 0017AE60  48 00 00 90 */	b lbl_8017DEF0
lbl_8017DE64:
/* 8017DE64 0017AE64  7F E3 FB 78 */	mr r3, r31
/* 8017DE68 0017AE68  4B FF F3 D5 */	bl __CARDVerify
/* 8017DE6C 0017AE6C  7C 7D 1B 78 */	mr r29, r3
/* 8017DE70 0017AE70  48 00 00 54 */	b lbl_8017DEC4
lbl_8017DE74:
/* 8017DE74 0017AE74  3C 60 80 18 */	lis r3, __CARDMountCallback@ha
/* 8017DE78 0017AE78  38 03 DD D8 */	addi r0, r3, __CARDMountCallback@l
/* 8017DE7C 0017AE7C  3C 60 80 18 */	lis r3, __CARDUnlockedHandler@ha
/* 8017DE80 0017AE80  90 1F 00 DC */	stw r0, 0xdc(r31)
/* 8017DE84 0017AE84  38 A3 9A 88 */	addi r5, r3, __CARDUnlockedHandler@l
/* 8017DE88 0017AE88  38 7C 00 00 */	addi r3, r28, 0
/* 8017DE8C 0017AE8C  38 80 00 00 */	li r4, 0
/* 8017DE90 0017AE90  48 01 A7 B5 */	bl EXILock
/* 8017DE94 0017AE94  2C 03 00 00 */	cmpwi r3, 0
/* 8017DE98 0017AE98  41 82 00 58 */	beq lbl_8017DEF0
/* 8017DE9C 0017AE9C  38 00 00 00 */	li r0, 0
/* 8017DEA0 0017AEA0  90 1F 00 DC */	stw r0, 0xdc(r31)
/* 8017DEA4 0017AEA4  7F 83 E3 78 */	mr r3, r28
/* 8017DEA8 0017AEA8  4B FF FA DD */	bl DoMount
/* 8017DEAC 0017AEAC  7C 7D 1B 79 */	or. r29, r3, r3
/* 8017DEB0 0017AEB0  41 80 00 14 */	blt lbl_8017DEC4
/* 8017DEB4 0017AEB4  48 00 00 3C */	b lbl_8017DEF0
lbl_8017DEB8:
/* 8017DEB8 0017AEB8  38 7C 00 00 */	addi r3, r28, 0
/* 8017DEBC 0017AEBC  38 9D 00 00 */	addi r4, r29, 0
/* 8017DEC0 0017AEC0  48 00 01 F1 */	bl DoUnmount
lbl_8017DEC4:
/* 8017DEC4 0017AEC4  83 DF 00 D0 */	lwz r30, 0xd0(r31)
/* 8017DEC8 0017AEC8  38 00 00 00 */	li r0, 0
/* 8017DECC 0017AECC  38 7F 00 00 */	addi r3, r31, 0
/* 8017DED0 0017AED0  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 8017DED4 0017AED4  7F A4 EB 78 */	mr r4, r29
/* 8017DED8 0017AED8  4B FF CB 1D */	bl __CARDPutControlBlock
/* 8017DEDC 0017AEDC  39 9E 00 00 */	addi r12, r30, 0
/* 8017DEE0 0017AEE0  7D 88 03 A6 */	mtlr r12
/* 8017DEE4 0017AEE4  38 7C 00 00 */	addi r3, r28, 0
/* 8017DEE8 0017AEE8  38 9D 00 00 */	addi r4, r29, 0
/* 8017DEEC 0017AEEC  4E 80 00 21 */	blrl 
lbl_8017DEF0:
/* 8017DEF0 0017AEF0  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8017DEF4 0017AEF4  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8017DEF8 0017AEF8  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8017DEFC 0017AEFC  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8017DF00 0017AF00  83 81 00 10 */	lwz r28, 0x10(r1)
/* 8017DF04 0017AF04  38 21 00 20 */	addi r1, r1, 0x20
/* 8017DF08 0017AF08  7C 08 03 A6 */	mtlr r0
/* 8017DF0C 0017AF0C  4E 80 00 20 */	blr 

.global CARDMountAsync
CARDMountAsync:
/* 8017DF10 0017AF10  7C 08 02 A6 */	mflr r0
/* 8017DF14 0017AF14  90 01 00 04 */	stw r0, 4(r1)
/* 8017DF18 0017AF18  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 8017DF1C 0017AF1C  BF 41 00 18 */	stmw r26, 0x18(r1)
/* 8017DF20 0017AF20  7C 7E 1B 79 */	or. r30, r3, r3
/* 8017DF24 0017AF24  3B 44 00 00 */	addi r26, r4, 0
/* 8017DF28 0017AF28  3B 65 00 00 */	addi r27, r5, 0
/* 8017DF2C 0017AF2C  3B A6 00 00 */	addi r29, r6, 0
/* 8017DF30 0017AF30  41 80 00 0C */	blt lbl_8017DF3C
/* 8017DF34 0017AF34  2C 1E 00 02 */	cmpwi r30, 2
/* 8017DF38 0017AF38  41 80 00 0C */	blt lbl_8017DF44
lbl_8017DF3C:
/* 8017DF3C 0017AF3C  38 60 FF 80 */	li r3, -128
/* 8017DF40 0017AF40  48 00 01 5C */	b lbl_8017E09C
lbl_8017DF44:
/* 8017DF44 0017AF44  3C 60 80 00 */	lis r3, 0x800030E3@ha
/* 8017DF48 0017AF48  88 03 30 E3 */	lbz r0, 0x800030E3@l(r3)
/* 8017DF4C 0017AF4C  54 00 06 31 */	rlwinm. r0, r0, 0, 0x18, 0x18
/* 8017DF50 0017AF50  41 82 00 0C */	beq lbl_8017DF5C
/* 8017DF54 0017AF54  38 60 FF FD */	li r3, -3
/* 8017DF58 0017AF58  48 00 01 44 */	b lbl_8017E09C
lbl_8017DF5C:
/* 8017DF5C 0017AF5C  1C 9E 01 10 */	mulli r4, r30, 0x110
/* 8017DF60 0017AF60  3C 60 80 24 */	lis r3, lbl_80245540@ha
/* 8017DF64 0017AF64  38 03 55 40 */	addi r0, r3, lbl_80245540@l
/* 8017DF68 0017AF68  7F E0 22 14 */	add r31, r0, r4
/* 8017DF6C 0017AF6C  4B FE BB ED */	bl OSDisableInterrupts
/* 8017DF70 0017AF70  80 1F 00 04 */	lwz r0, 4(r31)
/* 8017DF74 0017AF74  3B 83 00 00 */	addi r28, r3, 0
/* 8017DF78 0017AF78  2C 00 FF FF */	cmpwi r0, -1
/* 8017DF7C 0017AF7C  40 82 00 14 */	bne lbl_8017DF90
/* 8017DF80 0017AF80  7F 83 E3 78 */	mr r3, r28
/* 8017DF84 0017AF84  4B FE BB FD */	bl OSRestoreInterrupts
/* 8017DF88 0017AF88  38 60 FF FF */	li r3, -1
/* 8017DF8C 0017AF8C  48 00 01 10 */	b lbl_8017E09C
lbl_8017DF90:
/* 8017DF90 0017AF90  80 1F 00 00 */	lwz r0, 0(r31)
/* 8017DF94 0017AF94  2C 00 00 00 */	cmpwi r0, 0
/* 8017DF98 0017AF98  40 82 00 24 */	bne lbl_8017DFBC
/* 8017DF9C 0017AF9C  7F C3 F3 78 */	mr r3, r30
/* 8017DFA0 0017AFA0  48 01 A8 75 */	bl EXIGetState
/* 8017DFA4 0017AFA4  54 60 07 39 */	rlwinm. r0, r3, 0, 0x1c, 0x1c
/* 8017DFA8 0017AFA8  41 82 00 14 */	beq lbl_8017DFBC
/* 8017DFAC 0017AFAC  7F 83 E3 78 */	mr r3, r28
/* 8017DFB0 0017AFB0  4B FE BB D1 */	bl OSRestoreInterrupts
/* 8017DFB4 0017AFB4  38 60 FF FE */	li r3, -2
/* 8017DFB8 0017AFB8  48 00 00 E4 */	b lbl_8017E09C
lbl_8017DFBC:
/* 8017DFBC 0017AFBC  38 00 FF FF */	li r0, -1
/* 8017DFC0 0017AFC0  90 1F 00 04 */	stw r0, 4(r31)
/* 8017DFC4 0017AFC4  28 1D 00 00 */	cmplwi r29, 0
/* 8017DFC8 0017AFC8  93 5F 00 80 */	stw r26, 0x80(r31)
/* 8017DFCC 0017AFCC  93 7F 00 C4 */	stw r27, 0xc4(r31)
/* 8017DFD0 0017AFD0  41 82 00 0C */	beq lbl_8017DFDC
/* 8017DFD4 0017AFD4  7F A0 EB 78 */	mr r0, r29
/* 8017DFD8 0017AFD8  48 00 00 0C */	b lbl_8017DFE4
lbl_8017DFDC:
/* 8017DFDC 0017AFDC  3C 60 80 18 */	lis r3, __CARDDefaultApiCallback@ha
/* 8017DFE0 0017AFE0  38 03 97 EC */	addi r0, r3, __CARDDefaultApiCallback@l
lbl_8017DFE4:
/* 8017DFE4 0017AFE4  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 8017DFE8 0017AFE8  38 00 00 00 */	li r0, 0
/* 8017DFEC 0017AFEC  90 1F 00 CC */	stw r0, 0xcc(r31)
/* 8017DFF0 0017AFF0  80 1F 00 00 */	lwz r0, 0(r31)
/* 8017DFF4 0017AFF4  2C 00 00 00 */	cmpwi r0, 0
/* 8017DFF8 0017AFF8  40 82 00 34 */	bne lbl_8017E02C
/* 8017DFFC 0017AFFC  3C 60 80 18 */	lis r3, __CARDExtHandler@ha
/* 8017E000 0017B000  38 83 97 F0 */	addi r4, r3, __CARDExtHandler@l
/* 8017E004 0017B004  38 7E 00 00 */	addi r3, r30, 0
/* 8017E008 0017B008  48 01 9C B5 */	bl EXIAttach
/* 8017E00C 0017B00C  2C 03 00 00 */	cmpwi r3, 0
/* 8017E010 0017B010  40 82 00 1C */	bne lbl_8017E02C
/* 8017E014 0017B014  38 00 FF FD */	li r0, -3
/* 8017E018 0017B018  90 1F 00 04 */	stw r0, 4(r31)
/* 8017E01C 0017B01C  7F 83 E3 78 */	mr r3, r28
/* 8017E020 0017B020  4B FE BB 61 */	bl OSRestoreInterrupts
/* 8017E024 0017B024  38 60 FF FD */	li r3, -3
/* 8017E028 0017B028  48 00 00 74 */	b lbl_8017E09C
lbl_8017E02C:
/* 8017E02C 0017B02C  3B A0 00 00 */	li r29, 0
/* 8017E030 0017B030  93 BF 00 24 */	stw r29, 0x24(r31)
/* 8017E034 0017B034  38 00 00 01 */	li r0, 1
/* 8017E038 0017B038  38 7E 00 00 */	addi r3, r30, 0
/* 8017E03C 0017B03C  90 1F 00 00 */	stw r0, 0(r31)
/* 8017E040 0017B040  38 80 00 00 */	li r4, 0
/* 8017E044 0017B044  48 01 9A 09 */	bl EXISetExiCallback
/* 8017E048 0017B048  38 7F 00 E0 */	addi r3, r31, 0xe0
/* 8017E04C 0017B04C  4B FE 7C 9D */	bl OSCancelAlarm
/* 8017E050 0017B050  93 BF 00 84 */	stw r29, 0x84(r31)
/* 8017E054 0017B054  7F 83 E3 78 */	mr r3, r28
/* 8017E058 0017B058  93 BF 00 88 */	stw r29, 0x88(r31)
/* 8017E05C 0017B05C  4B FE BB 25 */	bl OSRestoreInterrupts
/* 8017E060 0017B060  3C 60 80 18 */	lis r3, __CARDMountCallback@ha
/* 8017E064 0017B064  38 03 DD D8 */	addi r0, r3, __CARDMountCallback@l
/* 8017E068 0017B068  3C 60 80 18 */	lis r3, __CARDUnlockedHandler@ha
/* 8017E06C 0017B06C  90 1F 00 DC */	stw r0, 0xdc(r31)
/* 8017E070 0017B070  38 A3 9A 88 */	addi r5, r3, __CARDUnlockedHandler@l
/* 8017E074 0017B074  38 7E 00 00 */	addi r3, r30, 0
/* 8017E078 0017B078  38 80 00 00 */	li r4, 0
/* 8017E07C 0017B07C  48 01 A5 C9 */	bl EXILock
/* 8017E080 0017B080  2C 03 00 00 */	cmpwi r3, 0
/* 8017E084 0017B084  40 82 00 0C */	bne lbl_8017E090
/* 8017E088 0017B088  38 60 00 00 */	li r3, 0
/* 8017E08C 0017B08C  48 00 00 10 */	b lbl_8017E09C
lbl_8017E090:
/* 8017E090 0017B090  93 BF 00 DC */	stw r29, 0xdc(r31)
/* 8017E094 0017B094  7F C3 F3 78 */	mr r3, r30
/* 8017E098 0017B098  4B FF F8 ED */	bl DoMount
lbl_8017E09C:
/* 8017E09C 0017B09C  BB 41 00 18 */	lmw r26, 0x18(r1)
/* 8017E0A0 0017B0A0  80 01 00 34 */	lwz r0, 0x34(r1)
/* 8017E0A4 0017B0A4  38 21 00 30 */	addi r1, r1, 0x30
/* 8017E0A8 0017B0A8  7C 08 03 A6 */	mtlr r0
/* 8017E0AC 0017B0AC  4E 80 00 20 */	blr 

.global DoUnmount
DoUnmount:
/* 8017E0B0 0017B0B0  7C 08 02 A6 */	mflr r0
/* 8017E0B4 0017B0B4  90 01 00 04 */	stw r0, 4(r1)
/* 8017E0B8 0017B0B8  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8017E0BC 0017B0BC  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8017E0C0 0017B0C0  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8017E0C4 0017B0C4  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8017E0C8 0017B0C8  3B A4 00 00 */	addi r29, r4, 0
/* 8017E0CC 0017B0CC  93 81 00 10 */	stw r28, 0x10(r1)
/* 8017E0D0 0017B0D0  3B 83 00 00 */	addi r28, r3, 0
/* 8017E0D4 0017B0D4  1C BC 01 10 */	mulli r5, r28, 0x110
/* 8017E0D8 0017B0D8  3C 60 80 24 */	lis r3, lbl_80245540@ha
/* 8017E0DC 0017B0DC  38 03 55 40 */	addi r0, r3, lbl_80245540@l
/* 8017E0E0 0017B0E0  7F E0 2A 14 */	add r31, r0, r5
/* 8017E0E4 0017B0E4  4B FE BA 75 */	bl OSDisableInterrupts
/* 8017E0E8 0017B0E8  80 1F 00 00 */	lwz r0, 0(r31)
/* 8017E0EC 0017B0EC  3B C3 00 00 */	addi r30, r3, 0
/* 8017E0F0 0017B0F0  2C 00 00 00 */	cmpwi r0, 0
/* 8017E0F4 0017B0F4  41 82 00 30 */	beq lbl_8017E124
/* 8017E0F8 0017B0F8  38 7C 00 00 */	addi r3, r28, 0
/* 8017E0FC 0017B0FC  38 80 00 00 */	li r4, 0
/* 8017E100 0017B100  48 01 99 4D */	bl EXISetExiCallback
/* 8017E104 0017B104  7F 83 E3 78 */	mr r3, r28
/* 8017E108 0017B108  48 01 9C C1 */	bl EXIDetach
/* 8017E10C 0017B10C  38 7F 00 E0 */	addi r3, r31, 0xe0
/* 8017E110 0017B110  4B FE 7B D9 */	bl OSCancelAlarm
/* 8017E114 0017B114  38 00 00 00 */	li r0, 0
/* 8017E118 0017B118  90 1F 00 00 */	stw r0, 0(r31)
/* 8017E11C 0017B11C  93 BF 00 04 */	stw r29, 4(r31)
/* 8017E120 0017B120  90 1F 00 24 */	stw r0, 0x24(r31)
lbl_8017E124:
/* 8017E124 0017B124  7F C3 F3 78 */	mr r3, r30
/* 8017E128 0017B128  4B FE BA 59 */	bl OSRestoreInterrupts
/* 8017E12C 0017B12C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8017E130 0017B130  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8017E134 0017B134  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8017E138 0017B138  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8017E13C 0017B13C  83 81 00 10 */	lwz r28, 0x10(r1)
/* 8017E140 0017B140  38 21 00 20 */	addi r1, r1, 0x20
/* 8017E144 0017B144  7C 08 03 A6 */	mtlr r0
/* 8017E148 0017B148  4E 80 00 20 */	blr 

.global CARDUnmount
CARDUnmount:
/* 8017E14C 0017B14C  7C 08 02 A6 */	mflr r0
/* 8017E150 0017B150  90 01 00 04 */	stw r0, 4(r1)
/* 8017E154 0017B154  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8017E158 0017B158  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8017E15C 0017B15C  38 81 00 0C */	addi r4, r1, 0xc
/* 8017E160 0017B160  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8017E164 0017B164  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8017E168 0017B168  3B A3 00 00 */	addi r29, r3, 0
/* 8017E16C 0017B16C  4B FF C7 D1 */	bl __CARDGetControlBlock
/* 8017E170 0017B170  2C 03 00 00 */	cmpwi r3, 0
/* 8017E174 0017B174  40 80 00 08 */	bge lbl_8017E17C
/* 8017E178 0017B178  48 00 00 64 */	b lbl_8017E1DC
lbl_8017E17C:
/* 8017E17C 0017B17C  1C 9D 01 10 */	mulli r4, r29, 0x110
/* 8017E180 0017B180  3C 60 80 24 */	lis r3, lbl_80245540@ha
/* 8017E184 0017B184  38 03 55 40 */	addi r0, r3, lbl_80245540@l
/* 8017E188 0017B188  7F C0 22 14 */	add r30, r0, r4
/* 8017E18C 0017B18C  4B FE B9 CD */	bl OSDisableInterrupts
/* 8017E190 0017B190  80 1E 00 00 */	lwz r0, 0(r30)
/* 8017E194 0017B194  3B E3 00 00 */	addi r31, r3, 0
/* 8017E198 0017B198  2C 00 00 00 */	cmpwi r0, 0
/* 8017E19C 0017B19C  41 82 00 34 */	beq lbl_8017E1D0
/* 8017E1A0 0017B1A0  38 7D 00 00 */	addi r3, r29, 0
/* 8017E1A4 0017B1A4  38 80 00 00 */	li r4, 0
/* 8017E1A8 0017B1A8  48 01 98 A5 */	bl EXISetExiCallback
/* 8017E1AC 0017B1AC  7F A3 EB 78 */	mr r3, r29
/* 8017E1B0 0017B1B0  48 01 9C 19 */	bl EXIDetach
/* 8017E1B4 0017B1B4  38 7E 00 E0 */	addi r3, r30, 0xe0
/* 8017E1B8 0017B1B8  4B FE 7B 31 */	bl OSCancelAlarm
/* 8017E1BC 0017B1BC  38 60 00 00 */	li r3, 0
/* 8017E1C0 0017B1C0  90 7E 00 00 */	stw r3, 0(r30)
/* 8017E1C4 0017B1C4  38 00 FF FD */	li r0, -3
/* 8017E1C8 0017B1C8  90 1E 00 04 */	stw r0, 4(r30)
/* 8017E1CC 0017B1CC  90 7E 00 24 */	stw r3, 0x24(r30)
lbl_8017E1D0:
/* 8017E1D0 0017B1D0  7F E3 FB 78 */	mr r3, r31
/* 8017E1D4 0017B1D4  4B FE B9 AD */	bl OSRestoreInterrupts
/* 8017E1D8 0017B1D8  38 60 00 00 */	li r3, 0
lbl_8017E1DC:
/* 8017E1DC 0017B1DC  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8017E1E0 0017B1E0  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8017E1E4 0017B1E4  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8017E1E8 0017B1E8  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8017E1EC 0017B1EC  38 21 00 20 */	addi r1, r1, 0x20
/* 8017E1F0 0017B1F0  7C 08 03 A6 */	mtlr r0
/* 8017E1F4 0017B1F4  4E 80 00 20 */	blr 
